<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
**Table of Contents**  *generated with [DocToc](https://github.com/thlorenz/doctoc)*

- [é¦–é¡µ](#%E9%A6%96%E9%A1%B5)
  - [é¡µé¢å¸ƒå±€](#%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80)
  - [é¢‘é“åˆ—è¡¨](#%E9%A2%91%E9%81%93%E5%88%97%E8%A1%A8)
    - [ä½¿ç”¨ Tab æ ‡ç­¾é¡µç»„ä»¶](#%E4%BD%BF%E7%94%A8-tab-%E6%A0%87%E7%AD%BE%E9%A1%B5%E7%BB%84%E4%BB%B6)
    - [å±•ç¤ºé¢‘é“åˆ—è¡¨](#%E5%B1%95%E7%A4%BA%E9%A2%91%E9%81%93%E5%88%97%E8%A1%A8)
    - [æ–‡ç« åˆ—è¡¨](#%E6%96%87%E7%AB%A0%E5%88%97%E8%A1%A8)
      - [å°è£…æ–‡ç« åˆ—è¡¨ç»„ä»¶](#%E5%B0%81%E8%A3%85%E6%96%87%E7%AB%A0%E5%88%97%E8%A1%A8%E7%BB%84%E4%BB%B6)
      - [ä½¿ç”¨ List åˆ—è¡¨ç»„ä»¶](#%E4%BD%BF%E7%94%A8-list-%E5%88%97%E8%A1%A8%E7%BB%84%E4%BB%B6)
      - [è®©æ–‡ç« åˆ—è¡¨å›ºå®š](#%E8%AE%A9%E6%96%87%E7%AB%A0%E5%88%97%E8%A1%A8%E5%9B%BA%E5%AE%9A)
      - [åŠ è½½æ–‡ç« åˆ—è¡¨æ•°æ®](#%E5%8A%A0%E8%BD%BD%E6%96%87%E7%AB%A0%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE)
      - [ä¸‹æ‹‰åˆ·æ–°](#%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0)
      - [æ–‡ç« åˆ—è¡¨é¡¹](#%E6%96%87%E7%AB%A0%E5%88%97%E8%A1%A8%E9%A1%B9)
      - [æ–‡ç« åˆ—è¡¨å›¾ç‰‡çš„æ‡’åŠ è½½](#%E6%96%87%E7%AB%A0%E5%88%97%E8%A1%A8%E5%9B%BE%E7%89%87%E7%9A%84%E6%87%92%E5%8A%A0%E8%BD%BD)
      - [å…³äºç¬¬ä¸‰æ–¹å›¾ç‰‡èµ„æº403é—®é¢˜](#%E5%85%B3%E4%BA%8E%E7%AC%AC%E4%B8%89%E6%96%B9%E5%9B%BE%E7%89%87%E8%B5%84%E6%BA%90403%E9%97%AE%E9%A2%98)
      - [å¤„ç†ç›¸å¯¹æ—¶é—´](#%E5%A4%84%E7%90%86%E7%9B%B8%E5%AF%B9%E6%97%B6%E9%97%B4)
  - [åé¦ˆæ“ä½œ](#%E5%8F%8D%E9%A6%88%E6%93%8D%E4%BD%9C)
    - [å±•ç¤ºåé¦ˆçš„åŠ¨ä½œé¢æ¿](#%E5%B1%95%E7%A4%BA%E5%8F%8D%E9%A6%88%E7%9A%84%E5%8A%A8%E4%BD%9C%E9%9D%A2%E6%9D%BF)
    - [æ¸²æŸ“ä¸€çº§åé¦ˆé¢æ¿çš„ç»“æ„](#%E6%B8%B2%E6%9F%93%E4%B8%80%E7%BA%A7%E5%8F%8D%E9%A6%88%E9%9D%A2%E6%9D%BF%E7%9A%84%E7%BB%93%E6%9E%84)
    - [ç‚¹å‡»ä¸€çº§é€‰é¡¹](#%E7%82%B9%E5%87%BB%E4%B8%80%E7%BA%A7%E9%80%89%E9%A1%B9)
    - [æ¸²æŸ“äºŒçº§åé¦ˆé¢æ¿çš„ç»“æ„](#%E6%B8%B2%E6%9F%93%E4%BA%8C%E7%BA%A7%E5%8F%8D%E9%A6%88%E9%9D%A2%E6%9D%BF%E7%9A%84%E7%BB%93%E6%9E%84)
    - [æ¸²æŸ“äºŒçº§åé¦ˆé¢æ¿çš„æ•°æ®](#%E6%B8%B2%E6%9F%93%E4%BA%8C%E7%BA%A7%E5%8F%8D%E9%A6%88%E9%9D%A2%E6%9D%BF%E7%9A%84%E6%95%B0%E6%8D%AE)
    - [æŒ‡å®šåŠ¨ä½œé¢æ¿çš„æŒ‚è½½ä½ç½®](#%E6%8C%87%E5%AE%9A%E5%8A%A8%E4%BD%9C%E9%9D%A2%E6%9D%BF%E7%9A%84%E6%8C%82%E8%BD%BD%E4%BD%8D%E7%BD%AE)
    - [å°†æ–‡ç« è®¾ç½®ä¸ºä¸æ„Ÿå…´è¶£](#%E5%B0%86%E6%96%87%E7%AB%A0%E8%AE%BE%E7%BD%AE%E4%B8%BA%E4%B8%8D%E6%84%9F%E5%85%B4%E8%B6%A3)
    - [ä»åˆ—è¡¨ä¸­ç§»é™¤ä¸æ„Ÿå…´è¶£çš„æ–‡ç« ](#%E4%BB%8E%E5%88%97%E8%A1%A8%E4%B8%AD%E7%A7%BB%E9%99%A4%E4%B8%8D%E6%84%9F%E5%85%B4%E8%B6%A3%E7%9A%84%E6%96%87%E7%AB%A0)
    - [ç‚¸æ¥¼ä¹‹åé˜²æ­¢ä¸Šæ‹‰åŠ è½½ä¸ç”Ÿæ•ˆ](#%E7%82%B8%E6%A5%BC%E4%B9%8B%E5%90%8E%E9%98%B2%E6%AD%A2%E4%B8%8A%E6%8B%89%E5%8A%A0%E8%BD%BD%E4%B8%8D%E7%94%9F%E6%95%88)
    - [å®ç°ä¸¾æŠ¥æ–‡ç« çš„åŠŸèƒ½](#%E5%AE%9E%E7%8E%B0%E4%B8%BE%E6%8A%A5%E6%96%87%E7%AB%A0%E7%9A%84%E5%8A%9F%E8%83%BD)
  - [é¢‘é“ç¼–è¾‘](#%E9%A2%91%E9%81%93%E7%BC%96%E8%BE%91)
    - [æ¸²æŸ“é¢‘é“ç®¡ç†çš„ DOM ç»“æ„](#%E6%B8%B2%E6%9F%93%E9%A2%91%E9%81%93%E7%AE%A1%E7%90%86%E7%9A%84-dom-%E7%BB%93%E6%9E%84)
    - [åŠ¨æ€è®¡ç®—æ›´å¤šé¢‘é“çš„åˆ—è¡¨æ•°æ®](#%E5%8A%A8%E6%80%81%E8%AE%A1%E7%AE%97%E6%9B%B4%E5%A4%9A%E9%A2%91%E9%81%93%E7%9A%84%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE)
    - [å®ç°æ–°å¢é¢‘é“çš„åŠŸèƒ½](#%E5%AE%9E%E7%8E%B0%E6%96%B0%E5%A2%9E%E9%A2%91%E9%81%93%E7%9A%84%E5%8A%9F%E8%83%BD)
    - [åˆ‡æ¢é¢‘é“](#%E5%88%87%E6%8D%A2%E9%A2%91%E9%81%93)
    - [å®ç°åˆ é™¤é¢‘é“çš„åŠŸèƒ½](#%E5%AE%9E%E7%8E%B0%E5%88%A0%E9%99%A4%E9%A2%91%E9%81%93%E7%9A%84%E5%8A%9F%E8%83%BD)
    - [é¢‘é“æ•°æ®æŒä¹…åŒ–](#%E9%A2%91%E9%81%93%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96)
    - [æ­£ç¡®çš„è·å–é¦–é¡µé¢‘é“åˆ—è¡¨æ•°æ®](#%E6%AD%A3%E7%A1%AE%E7%9A%84%E8%8E%B7%E5%8F%96%E9%A6%96%E9%A1%B5%E9%A2%91%E9%81%93%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

<!--
 * @Author: hidari
 * @Date: 2022-05-09 17:12:28
 * @LastEditors: lijiaying 1640106564@qq.com
 * @LastEditTime: 2022-05-09 18:23:38
 * @FilePath: \mobile-news-management\markdown\HOME.md
 * @Description: é¦–é¡µ
 * 
 * Copyright (c) 2022 by hidari, All Rights Reserved. 
-->
# é¦–é¡µ

## é¡µé¢å¸ƒå±€
```vue
<template>
  <div class="home-container">
    <!-- å¯¼èˆªæ  -->
    <van-nav-bar class="app-nav-bar">
      <van-button
        slot="title"
        class="search-btn"
        icon="search"
        type="info"
        round
        size="small"
      >æœç´¢</van-button>
    </van-nav-bar>
    <!-- /å¯¼èˆªæ  -->
  </div>
</template>

<script>
export default {
  name: 'HomeIndex',
  components: {},
  props: {},
  data () {
    return {}
  },
  computed: {},
  watch: {},
  created () {},
  mounted () {},
  methods: {}
}
</script>

<style scoped lang="less">
.home-container {
  /deep/ .van-nav-bar__title {
    max-width: none;
  }
  .search-btn {
    width: 277px;
    height: 32px;
    background: #5babfb;
    border: none;
    .van-icon {
      font-size: 16px;
    }
    .van-button__text {
      font-size: 14px;
    }
  }
}
</style>
```

## é¢‘é“åˆ—è¡¨
### ä½¿ç”¨ Tab æ ‡ç­¾é¡µç»„ä»¶
```vue
<template>
  <div class="home-container">
    <!-- å¯¼èˆªæ  -->
    <van-nav-bar class="app-nav-bar">
      <van-button
        slot="title"
        class="search-btn"
        icon="search"
        type="info"
        round
        size="small"
      >æœç´¢</van-button>
    </van-nav-bar>
    <!-- /å¯¼èˆªæ  -->

    <!-- æ–‡ç« é¢‘é“åˆ—è¡¨ -->
    <van-tabs v-model="active">
      <van-tab title="æ ‡ç­¾ 1">å†…å®¹ 1</van-tab>
      <van-tab title="æ ‡ç­¾ 2">å†…å®¹ 2</van-tab>
      <van-tab title="æ ‡ç­¾ 3">å†…å®¹ 3</van-tab>
      <van-tab title="æ ‡ç­¾ 4">å†…å®¹ 4</van-tab>
      <van-tab title="æ ‡ç­¾ 5">å†…å®¹ 5</van-tab>
    </van-tabs>
    <!-- /æ–‡ç« é¢‘é“åˆ—è¡¨ -->
  </div>
</template>

<script>
export default {
  name: 'HomeIndex',
  components: {},
  props: {},
  data () {
    return {
      active: 0 // æ§åˆ¶è¢«æ¿€æ´»çš„æ ‡ç­¾
    }
  },
  computed: {},
  watch: {},
  created () {},
  mounted () {},
  methods: {}
}
</script>

<style scoped lang="less">
.home-container {
  /deep/ .van-nav-bar__title {
    max-width: none;
  }
  .search-btn {
    width: 277px;
    height: 32px;
    background: #5babfb;
    border: none;
    .van-icon {
      font-size: 16px;
    }
    .van-button__text {
      font-size: 14px;
    }
  }
}
</style>
```

### å±•ç¤ºé¢‘é“åˆ—è¡¨
```js
/**
 * è¯·æ±‚ç”¨æˆ·é¢‘é“åˆ—è¡¨
 * @returns
 */
export const reqGetUserChannel = () => request.get('/user/channels')
```
```js
    /**
     * è·å–ç”¨æˆ·é¢‘é“åˆ—è¡¨
     * @param {*} params
     * @returns
     */
    async getLoadChannels ({ commit }) {
      const res = await reqGetUserChannel()
      if (res.message === 'OK') {
        commit('getLoadChannels', res.data.channels)
        return 'ok'
      } else {
        return Promise.reject(new Error('failed'))
      }
    },
```
```vue
<van-tabs v-model="active">
  <van-tab
    :title="channel.name"
    v-for="channel in channels"
    :key="channel.id"
  >
    {{ channel.name }}çš„å†…å®¹
  </van-tab>
</van-tabs>
```
```less
.channel-tabs {
  /deep/ .van-tab {
    border-right: 1px solid #edeff3;
    border-bottom: 1px solid #edeff3;
  }
  /deep/ .van-tabs__line {
    bottom: 20px;
    width: 15px !important;
    height: 3px;
    background: #3296fa;
  }
}
```

### æ–‡ç« åˆ—è¡¨

> ç›®æ ‡ï¼šåŠ è½½è¿‡çš„æ•°æ®åˆ—è¡¨ä¸è¦é‡æ–°åŠ è½½ã€‚

å®ç°æ€è·¯ï¼šå‡†å¤‡å¤šä¸ª `list` æ•°ç»„ï¼Œæ¯ä¸ªé¢‘é“å¯¹åº”ä¸€ä¸ªï¼ŒæŸ¥çœ‹å“ªä¸ªé¢‘é“å°±æŠŠæ•°æ®å¾€å“ªä¸ªé¢‘é“çš„åˆ—è¡¨æ•°ç»„ä¸­å­˜æ”¾ï¼Œè¿™æ ·çš„è¯å°±ä¸ä¼šå¯¼è‡´è¦†ç›–é—®é¢˜ã€‚ä¸ªä¸€ä¸ªå£°æ˜çš„è¯ä¼šéå¸¸éº»çƒ¦ï¼Œæ‰€ä»¥è¿™é‡Œåˆ©ç”¨ç»„ä»¶æ¥å¤„ç†ã€‚

å…·ä½“å®ç°ï¼š

- å°è£…ä¸€ä¸ªæ–‡ç« åˆ—è¡¨ç»„ä»¶
- ç„¶ååœ¨é¢‘é“åˆ—è¡¨ä¸­æŠŠæ–‡ç« åˆ—è¡¨éå†å‡ºæ¥

å› ä¸ºæ–‡ç« åˆ—è¡¨ç»„ä»¶ä¸­è¯·æ±‚è·å–æ–‡ç« åˆ—è¡¨æ•°æ®éœ€è¦é¢‘é“ `id`ï¼Œæ‰€ä»¥ é¢‘é“ `id` åº”è¯¥ä½œä¸º `props` å‚æ•°ä¼ é€’ç»™æ–‡ç« åˆ—è¡¨ç»„ä»¶ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œç›´æ¥æŠŠé¢‘é“å¯¹è±¡ä¼ é€’ç»™æ–‡ç« åˆ—è¡¨ç»„ä»¶ã€‚

#### å°è£…æ–‡ç« åˆ—è¡¨ç»„ä»¶
```vue
<template>
  <div class="article-list">æ–‡ç« åˆ—è¡¨</div>
</template>

<script>
export default {
  name: 'ArticleList',
  components: {},
  props: {
    channel: {
      type: Object,
      required: true
    }
  },
  data () {
    return {}
  },
  computed: {},
  watch: {},
  created () {},
  mounted () {},
  methods: {}
}
</script>

<style scoped lang="less"></style>
```

> ä¸ºä»€ä¹ˆæ ‡ç­¾å†…å®¹æ˜¯æ‡’æ¸²æŸ“çš„ï¼Ÿ
> 
> å› ä¸ºè¿™æ˜¯ `Tab` æ ‡ç­¾é¡µç»„ä»¶æœ¬èº«æ”¯æŒçš„é»˜è®¤åŠŸèƒ½ï¼Œå¦‚æœä¸éœ€è¦å¯ä»¥é€šè¿‡é…ç½® `:lazy-render="false"` æ¥å…³é—­è¿™ä¸ªæ•ˆæœã€‚

#### ä½¿ç”¨ List åˆ—è¡¨ç»„ä»¶
```vue
<!-- List åˆ—è¡¨ï¼šç€‘å¸ƒæµæ»šåŠ¨åŠ è½½ï¼Œç”¨äºå±•ç¤ºé•¿åˆ—è¡¨ï¼Œå½“åˆ—è¡¨å³å°†æ»šåŠ¨åˆ°åº•éƒ¨æ—¶ï¼Œä¼šè§¦å‘äº‹ä»¶å¹¶åŠ è½½æ›´å¤šåˆ—è¡¨é¡¹ã€‚ -->
<template>
  <div class="article-list">
    <van-list
      v-model="loading"
      :finished="finished"
      finished-text="æ²¡æœ‰æ›´å¤šäº†"
      @load="onLoad"
    >
      <van-cell v-for="item in list" :key="item" :title="item" />
    </van-list>
  </div>
</template>

<script>
export default {
  name: 'ArticleList',
  components: {},
  props: {
    channel: {
      type: Object,
      required: true
    }
  },
  data () {
    return {
      list: [],
      loading: false,
      finished: false
    }
  },
  computed: {},
  watch: {},
  created () {},
  mounted () {},
  methods: {
    onLoad () {
      // å¼‚æ­¥æ›´æ–°æ•°æ®
      // setTimeout ä»…åšç¤ºä¾‹ï¼ŒçœŸå®åœºæ™¯ä¸­ä¸€èˆ¬ä¸º ajax è¯·æ±‚
      setTimeout(() => {
        for (let i = 0; i < 10; i++) {
          this.list.push(this.list.length + 1)
        }

        // åŠ è½½çŠ¶æ€ç»“æŸ
        this.loading = false

        // æ•°æ®å…¨éƒ¨åŠ è½½å®Œæˆ
        if (this.list.length >= 40) {
          this.finished = true
        }
      }, 1000)
    }
  }
}
</script>

<style scoped lang="less"></style>
```
`List` ç»„ä»¶é€šè¿‡ `loading` å’Œ `finished` ä¸¤ä¸ªå˜é‡æ§åˆ¶åŠ è½½çŠ¶æ€ï¼Œ
å½“ç»„ä»¶åˆå§‹åŒ–æˆ–æ»šåŠ¨åˆ°åˆ°åº•éƒ¨æ—¶ï¼Œä¼šè§¦å‘ `load` äº‹ä»¶å¹¶å°† `loading` è®¾ç½®æˆ `true`ï¼Œæ­¤æ—¶å¯ä»¥å‘èµ·å¼‚æ­¥æ“ä½œå¹¶æ›´æ–°æ•°æ®ï¼Œæ•°æ®æ›´æ–°å®Œæ¯•åï¼Œå°† `loading` è®¾ç½®æˆ `false` å³å¯ã€‚
è‹¥æ•°æ®å·²å…¨éƒ¨åŠ è½½å®Œæ¯•ï¼Œåˆ™ç›´æ¥å°† `finished` è®¾ç½®æˆ `true` å³å¯ã€‚

- `load` äº‹ä»¶ï¼š 
  - `List` åˆå§‹åŒ–åä¼šè§¦å‘ä¸€æ¬¡ `load` äº‹ä»¶ï¼Œç”¨äºåŠ è½½ç¬¬ä¸€å±çš„æ•°æ®ã€‚
  - å¦‚æœä¸€æ¬¡è¯·æ±‚åŠ è½½çš„æ•°æ®æ¡æ•°è¾ƒå°‘ï¼Œå¯¼è‡´åˆ—è¡¨å†…å®¹æ— æ³•é“ºæ»¡å½“å‰å±å¹•ï¼Œ`List` ä¼šç»§ç»­è§¦å‘ `load` äº‹ä»¶ï¼Œç›´åˆ°å†…å®¹é“ºæ»¡å±å¹•æˆ–æ•°æ®å…¨éƒ¨åŠ è½½å®Œæˆã€‚
- `loading` å±æ€§ï¼šæ§åˆ¶åŠ è½½ä¸­çš„ `loading` çŠ¶æ€ 
  - éåŠ è½½ä¸­ï¼Œ`loading` ä¸º `false`ï¼Œæ­¤æ—¶ä¼šæ ¹æ®åˆ—è¡¨æ»šåŠ¨ä½ç½®åˆ¤æ–­æ˜¯å¦è§¦å‘ `load` äº‹ä»¶ï¼ˆåˆ—è¡¨å†…å®¹ä¸è¶³ä¸€å±å¹•æ—¶ï¼Œä¼šç›´æ¥è§¦å‘ï¼‰
  - åŠ è½½ä¸­ï¼Œ`loading` ä¸º `true`ï¼Œè¡¨ç¤ºæ­£åœ¨å‘é€å¼‚æ­¥è¯·æ±‚ï¼Œæ­¤æ—¶ä¸ä¼šè§¦å‘ `load` äº‹ä»¶
- `finished` å±æ€§ï¼šæ§åˆ¶åŠ è½½ç»“æŸçš„çŠ¶æ€ 
  - åœ¨æ¯æ¬¡è¯·æ±‚å®Œæ¯•åï¼Œéœ€è¦æ‰‹åŠ¨å°† `loading` è®¾ç½®ä¸º `false`ï¼Œè¡¨ç¤ºæœ¬æ¬¡åŠ è½½ç»“æŸ
  - æ‰€æœ‰æ•°æ®åŠ è½½ç»“æŸï¼Œ`finished` ä¸º `true`ï¼Œæ­¤æ—¶ä¸ä¼šè§¦å‘ `load` äº‹ä»¶

#### è®©æ–‡ç« åˆ—è¡¨å›ºå®š
è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š
1. çœ‹ä¸åˆ°åº•éƒ¨å†…å®¹(è®¾ç½® `padding`)
2. è®°ä½åˆ—è¡¨çš„æ»šåŠ¨ä½ç½®ï¼ˆæ¯ä¸ªåˆ—è¡¨éƒ½æœ‰è‡ªå·±çš„æ»šåŠ¨å®¹å™¨ï¼Œæ¯ä¸ªæ»šåŠ¨å®¹å™¨ä¸­æœ‰ä¸åŒçš„æ»šåŠ¨ä½ç½®ï¼‰
    - ç»™å®¹å™¨è®¾å®šæ ·å¼
    - æ¯æ¬¡æ¸²æŸ“ç»„ä»¶æ—¶éƒ½æ¸²æŸ“ä¸€éå®¹å™¨ ä¸å†å…±ç”¨åŒä¸€ä¸ª `body` æ»šåŠ¨
```less
/**.article-list
ä»¥ä¸‹ä¸å—çˆ¶å…ƒç´ å½±å“ å“åº”å¼å•ä½
vw(å®½)
è¯´æ˜ï¼šè§†å£å°±æ˜¯ï¼°ï¼£ç«¯å’Œæ‰‹æœºç«¯çš„å¯è§†åŒºçš„çš„å°ºå¯¸ã€‚
ç›¸å¯¹äºè§†å£çš„å®½åº¦ï¼Œè§†å£è¢«å‡åˆ†ä¸º100å•ä½çš„vw

vh(é«˜)
è¯´æ˜ï¼š
ç›¸å¯¹äºè§†å£çš„é«˜åº¦ã€‚è§†å£è¢«å‡åˆ†ä¸º100å•ä½çš„vh

vmax
è¯´æ˜ï¼š
ç›¸å¯¹äºè§†å£çš„å®½åº¦æˆ–é«˜åº¦ä¸­è¾ƒå¤§çš„é‚£ä¸ªã€‚å…¶ä¸­æœ€å¤§çš„é‚£ä¸ªè¢«å‡åˆ†ä¸º100å•ä½çš„vmax

vmin
è¯´æ˜ï¼š
ç›¸å¯¹äºè§†å£çš„å®½åº¦æˆ–é«˜åº¦ä¸­è¾ƒå°çš„é‚£ä¸ªã€‚å…¶ä¸­æœ€å°çš„é‚£ä¸ªè¢«å‡åˆ†ä¸º100å•ä½çš„vmin
*/
.article-list {
  height: 83vh;
  overflow: auto;
}
```

#### åŠ è½½æ–‡ç« åˆ—è¡¨æ•°æ®
```js
  data () {
    return {
      articles: [], // æ•°æ®åˆ—è¡¨
      loading: false, // æ§åˆ¶åŠ è½½ä¸­çš„ loading çŠ¶æ€
      finished: false, // æ§åˆ¶åŠ è½½ç»“æŸçš„çŠ¶æ€ï¼Œå½“åŠ è½½ç»“æŸï¼Œä¸å†è§¦å‘åŠ è½½æ›´å¤š
      timestamp: null // è·å–ä¸‹ä¸€é¡µæ•°æ®çš„æ—¶é—´æˆ³
    }
  },
```
```js
/**
 * æ ¹æ®é¢‘é“ Id è¯·æ±‚é¢‘é“ä¸‹çš„æ–‡ç« åˆ—è¡¨æ•°æ®
 * @param {*} id é¢‘é“çš„ Id
 * @param {*} time æ—¶é—´æˆ³
 * @returns
 */
export const reqGetArtList = (params) => request.get('/articles', {
  params
})
```
```js
    async onLoad () {
      // 1. è¯·æ±‚è·å–æ•°æ®
      const { data } = await reqGetArtList({
        channel_id: this.channel.id, // é¢‘é“ id
        timestamp: this.timestamp || Date.now() // è·å–ä¸‹ä¸€é¡µæ•°æ®çš„æ—¶é—´æˆ³ï¼ŒDate.now() è¡¨ç¤ºè·å–å½“å‰æœ€æ–°æ•°æ®
      })

      // æ¨¡æ‹ŸåŠ è½½å‡ºé”™
      // if (Math.random() > 0.5) {
      //   JSON.parse('ddvcfdvcfdvfda')
      // }

      // 2. å°†æ•°æ®æ·»åŠ åˆ°å½“å‰é¢‘é“çš„æ–‡ç« åˆ—è¡¨ä¸­
      // ...æ•°ç»„ï¼Œæ•°ç»„çš„å±•å¼€æ“ä½œç¬¦ï¼Œå®ƒä¼šæŠŠæ•°ç»„å…ƒç´ ä¸€ä¸ªä¸€ä¸ªçš„æ‹¿å‡ºæ¥ï¼Œä¼ é€’ç»™ä½¿ç”¨çš„ä½ç½®
      const { results } = data
      this.list.push(...results)

      // 3. å°† loading è®¾ç½®ä¸º false
      this.loading = false

      // 4. åˆ¤æ–­è¿˜æœ‰ä¸‹ä¸€é¡µæ•°æ®ï¼Œåˆ™æ›´æ–°è·å–ä¸‹ä¸€ä¸ªæ•°æ®çš„æ—¶é—´æˆ³
      //    å¦‚æœæ²¡æœ‰äº†ï¼Œåˆ™å°† finished è®¾ç½®ä¸º trueï¼Œä¸å†åŠ è½½æ›´å¤šäº†
      if (results.length) {
        // æ›´æ–°è·å–ä¸‹ä¸€é¡µæ•°æ®çš„æ—¶é—´æˆ³
        this.timestamp = data.pre_timestamp
      } else {
        this.finished = true
      }
    }
```
æ¨¡æ¿ç»‘å®šï¼š
```vue
<van-list
  v-model="loading"
  :finished="finished"
  finished-text="æ²¡æœ‰æ›´å¤šäº†"
  @load="onLoad"
>
  <van-cell
    v-for="(article, index) in articles"
    :key="index"
    :title="article.title"
  />
</van-list>
```

#### ä¸‹æ‹‰åˆ·æ–°

> ä¸»è¦ä½¿ç”¨åˆ° `Vant` ä¸­çš„ `PullRefresh` ä¸‹æ‹‰åˆ·æ–° ç»„ä»¶ã€‚

æ€è·¯ï¼š
1. ä½¿ç”¨ä¸‹æ‹‰åˆ·æ–°ç»„ä»¶å°†ä¸‹æ‹‰åŒºåŸŸåŒ…è£¹ä½
2. æ³¨å†Œä¸‹æ‹‰åˆ·æ–°äº‹ä»¶å¤„ç†å‡½æ•°
3. å‘é€è¯·æ±‚è·å–æ–‡ç« åˆ—è¡¨æ•°æ®
4. æŠŠè·å–åˆ°çš„æ•°æ®æ·»åŠ åˆ°å½“å‰é¢‘é“çš„æ–‡ç« åˆ—è¡¨çš„é¡¶éƒ¨

å°†ä¸‹æ‹‰åˆ·æ–°åˆ·æ–°ç»„ä»¶éœ€è¦çš„æ•°æ®åˆå§‹åŒ–åˆ° data ä¸­ï¼š
```js
data () {
  return {
    ...
    isRefreshLoading: false, // ä¸‹æ‹‰åˆ·æ–°çš„ loading çŠ¶æ€
    refreshSuccessText: '' // ä¸‹æ‹‰åˆ·æ–°æˆåŠŸçš„æç¤ºæ–‡æœ¬
  }
}
```
ä½¿ç”¨ä¸‹æ‹‰åˆ·æ–°ç»„ä»¶å°†æ–‡ç« åˆ—è¡¨åŒ…è£¹ä½ï¼š
```vue
<template>
  <div class="article-list">
    <van-pull-refresh
    v-model="refreshLoading"
    @refresh="onRefresh"
    :success-duration="1500"
    :disabled="finished">
      <van-list
        v-model="loading"
        :finished="finished"
        finished-text="æ²¡æœ‰æ›´å¤šäº†"
        @load="onLoad"
      >
        <article-item
          :article="article"
          v-for="(article, index) in list"
          :key="index"
        />
      </van-list>
    </van-pull-refresh>
  </div>
</template>
```

ä¸‹æ‹‰åˆ·æ–°æ—¶ä¼šè§¦å‘ç»„ä»¶çš„ `refresh` äº‹ä»¶ï¼Œåœ¨äº‹ä»¶çš„å›è°ƒå‡½æ•°ä¸­å¯ä»¥è¿›è¡ŒåŒæ­¥æˆ–å¼‚æ­¥æ“ä½œï¼Œæ“ä½œå®Œæˆåå°† `v-model` è®¾ç½®ä¸º `false`ï¼Œè¡¨ç¤ºåŠ è½½å®Œæˆã€‚
```js
    async onRefresh () {
      // 1. è¯·æ±‚è·å–æœ€æ–°æ•°æ®
      const { data } = await reqGetArtList({
        channel_id: this.channel.id,
        timestamp: Date.now() // è·å–æœ€æ–°æ•°æ®ä¼ é€’å½“å‰æœ€æ–°æ—¶é—´æˆ³å³å¯
      })

      // 2. æŠŠæ•°æ®æ”¾åˆ°åˆ—è¡¨çš„é¡¶éƒ¨
      const results = data.results
      let message = ''
      if (!this.list.indexOf(...results)) {
        this.list.unshift(...results)
        message = `æ›´æ–°äº†${results.length}æ¡æ•°æ®`
      } else {
        message = 'æš‚æ— æ•°æ®æ›´æ–°'
      }

      // 3. åœæ­¢ä¸‹æ‹‰åˆ·æ–°çš„è½¬åœˆåœˆ
      this.refreshLoading = false

      // 4. æç¤ºç”¨æˆ·åˆ·æ–°æˆåŠŸ
      this.$toast(message)
    }
```

#### æ–‡ç« åˆ—è¡¨é¡¹

**å°è£…ç»„ä»¶**
åˆ›å»º `src/components/article-item/index.vue` ç»„ä»¶
```vue
<template>
  <div class="article-item">æ–‡ç« åˆ—è¡¨é¡¹</div>
</template>

<script>
export default {
  name: 'ArticleItem',
  components: {},
  props: {
    article: {
      type: Object,
      required: true
    }
  },
  data () {
    return {}
  },
  computed: {},
  watch: {},
  created () {},
  mounted () {},
  methods: {}
}
</script>

<style scoped lang="less"></style>
```

**å±•ç¤ºåˆ—è¡¨é¡¹å†…å®¹**
```js
<template>
  <van-cell class="article-item">
    <div slot="title" class="title van-multi-ellipsis--l3">{{ article.title }}</div>
    <div slot="label">
      <div
        v-if="article.cover.type === 3"
        class="cover-wrap"
      >
        <div
          class="cover-wrap-item"
          v-for="(img, index) in article.cover.images"
          :key="index"
        >
          <van-image
            class="cover-image"
            fit="cover"
            :src="img"
          />
        </div>
      </div>
      <div class="label-wrap">
        <span>{{ article.aut_name }}</span>
        <span>{{ article.comm_count }}è¯„è®º</span>
        <span>{{ article.pubdate }}</span>
      </div>
    </div>
    <!-- é»˜è®¤æ’æ§½çš„åå­—å« defaultï¼Œå¯ä»¥çœç•¥ -->
    <van-image
      v-if="article.cover.type === 1"
      class="right-cover"
      fit="cover"
      :src="article.cover.images[0]"
    />
  </van-cell>
</template>

<script>
export default {
  name: 'ArticleItem',
  components: {},
  props: {
    article: {
      type: Object,
      required: true
    }
  },
  data () {
    return {}
  },
  computed: {},
  watch: {},
  created () {},
  mounted () {},
  methods: {}
}
</script>

<style scoped lang="less">
.article-item {
  .title {
    font-size: 16px;
    color: #3a3a3a;
  }
  /deep/ .van-cell__value {
    flex: unset;
    width: 116px;
    height: 73px;
    margin-left: 12px;
  }
  .right-cover {
    width: 116px;
    height: 73px;
  }

  .cover-wrap {
    padding: 15px 0;
    display: flex;
    .cover-wrap-item {
      flex: 1;
      height: 73px;
      &:not(:last-child) {
        padding-right: 4px;
      }
      .cover-image {
        width: 100%;
        height: 73px;
      }
    }
  }

  .label-wrap {
    font-size: 11px;
    color: #b4b4b4;
  }
  .label-wrap span {
    margin-right: 12px;
  }
}
</style>
```

**é˜²æ­¢é¦–æ¬¡åŠ è½½æ—¶è§¦å‘ load äº‹ä»¶**

1. åœ¨æµè§ˆå™¨ä¸­ç»è¿‡æµ‹è¯•ï¼Œå‘ç°ï¼š`<van-list>`ç»„ä»¶é¦–æ¬¡åŠ è½½çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨è§¦å‘ä¸€æ¬¡ `@load` äº‹ä»¶ã€‚

2. ç»è¿‡ç¿»é˜… Vant çš„å®˜æ–¹æ–‡æ¡£ï¼Œå‘ç°å¯ä»¥ä¸º `<van-list>` ç»„ä»¶ç»‘å®š `:immediate-check="false"` å±æ€§ï¼Œå³å¯é˜²æ­¢é¦–æ¬¡åŠ è½½æ—¶è§¦å‘ `load` äº‹ä»¶ï¼š
```vue
<template>
  <div>
    <van-list v-model="loading" :finished="finished" finished-text="æ²¡æœ‰æ›´å¤šäº†" @load="onLoad" :immediate-check="false">
      <!-- å¾ªç¯æ¸²æŸ“æ–‡ç« çš„åˆ—è¡¨ -->
      <art-item v-for="item in artlist" :key="item.art_id" :article="item"></art-item>
    </van-list>
  </div>
</template>
```

#### æ–‡ç« åˆ—è¡¨å›¾ç‰‡çš„æ‡’åŠ è½½

> åŸºäº `Vant` çš„ `Lazyload` æ‡’åŠ è½½

1. åœ¨ `main.js` å…¥å£æ–‡ä»¶ä¸­ï¼ŒæŒ‰éœ€å¯¼å…¥ `Lazyload` æŒ‡ä»¤ï¼š
```js
import Vant, { Lazyload } from 'vant'
```
2. åœ¨ `main.js` ä¸­å°† `Lazyload` æ³¨å†Œä¸ºå…¨å±€å¯ç”¨çš„æŒ‡ä»¤ï¼š
```js
Vue.use(Lazyload)
```
3. åœ¨ `ArtItem.vue` ç»„ä»¶ä¸­ï¼Œåˆ é™¤ `<img>` æ ‡ç­¾çš„ `src` å±æ€§ï¼Œå¹¶åº”ç”¨ `v-lazy` æŒ‡ä»¤ï¼ŒæŒ‡ä»¤çš„å€¼æ˜¯è¦å±•ç¤ºçš„å›¾ç‰‡åœ°å€ï¼š
```html
<!-- å•å¼ å›¾ç‰‡ -->
<img alt="" class="thumb" v-if="article.cover.type === 1" v-lazy="article.cover.images[0]">

<!-- ä¸‰å¼ å›¾ç‰‡ -->
<div class="thumb-box" v-if="article.cover.type === 3">
  <img alt="" class="thumb" v-for="(item, index) in article.cover.images" :key="index" v-lazy="item">
```


#### å…³äºç¬¬ä¸‰æ–¹å›¾ç‰‡èµ„æº403é—®é¢˜

> å› ä¸ºæœ¬é¡¹ç›®æ¥å£æ•°æ®æ˜¯åç«¯é€šè¿‡çˆ¬è™«æŠ“å–çš„ç¬¬ä¸‰æ–¹å¹³å°å†…å®¹ï¼Œè€Œç¬¬ä¸‰æ–¹å¹³å°å¯¹å›¾ç‰‡èµ„æºåšäº†é˜²ç›—é“¾ä¿æŠ¤å¤„ç†ã€‚
> æœåŠ¡ç«¯ä¸€èˆ¬ä½¿ç”¨ `Referer` è¯·æ±‚å¤´è¯†åˆ«è®¿é—®æ¥æºï¼Œç„¶åå¤„ç†èµ„æºè®¿é—®ã€‚
> æ‰©å±•å‚è€ƒï¼šhttp://www.ruanyifeng.com/blog/2019/06/http-referer.html

`Referer` æ˜¯ `HTTP` è¯·æ±‚å¤´çš„ä¸€éƒ¨åˆ†ï¼Œå½“æµè§ˆå™¨å‘ `Web` æœåŠ¡å™¨å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¼šå¸¦ä¸Š `Referer`ï¼Œå®ƒåŒ…å«äº†å½“å‰è¯·æ±‚èµ„æºçš„æ¥æºé¡µé¢çš„åœ°å€ã€‚æœåŠ¡ç«¯ä¸€èˆ¬ä½¿ç”¨ `Referer` è¯·æ±‚å¤´è¯†åˆ«è®¿é—®æ¥æºï¼Œå¯èƒ½ä¼šä»¥æ­¤è¿›è¡Œç»Ÿè®¡åˆ†æã€æ—¥å¿—è®°å½•ä»¥åŠç¼“å­˜ä¼˜åŒ–ç­‰ã€‚

> éœ€è¦æ³¨æ„çš„æ˜¯ `referer` å®é™…ä¸Šæ˜¯ "referrer" è¯¯æ‹¼å†™ã€‚

è§£å†³ï¼š
ä¸è¦å‘é€ `referrer` ï¼Œå¯¹æ–¹æœåŠ¡ç«¯å°±ä¸çŸ¥é“ä»å“ªé‡Œæ¥

ç”¨ `<a>ã€<area>ã€<img>ã€<iframe>ã€<script>` æˆ–è€… `<link>` å…ƒç´ ä¸Šçš„ `referrerpolicy` å±æ€§ä¸ºå…¶è®¾ç½®ç‹¬ç«‹çš„è¯·æ±‚ç­–ç•¥ï¼Œä¾‹å¦‚ï¼š
```html
<img src="http://â€¦â€¦" referrerPolicy="no-referrer">
```
æˆ–è€…ç›´æ¥åœ¨ HTMl é¡µé¢å¤´ä¸­é€šè¿‡ meta å±æ€§å…¨å±€é…ç½®ï¼š
```html
<meta name="referrer" content="no-referrer" />
```

#### å¤„ç†ç›¸å¯¹æ—¶é—´

æ¨èä¸¤ä¸ªç¬¬ä¸‰æ–¹åº“ï¼š

- Moment.js
- Day.js

ä¸¤è€…éƒ½æ˜¯ä¸“é—¨ç”¨äºå¤„ç†æ—¶é—´çš„ JavaScript åº“ï¼ŒåŠŸèƒ½å·®ä¸å¤šï¼Œå› ä¸º Day.js çš„è®¾è®¡å°±æ˜¯å‚è€ƒçš„ Moment.jsã€‚ä½†æ˜¯ `Day.js` ç›¸æ¯” `Moment.js` çš„åŒ…ä½“ç§¯è¦æ›´å°ä¸€äº›ï¼Œå› ä¸ºå®ƒé‡‡ç”¨äº†æ’ä»¶åŒ–çš„å¤„ç†æ–¹å¼ã€‚

Day.js æ˜¯ä¸€ä¸ªè½»é‡çš„å¤„ç†æ—¶é—´å’Œæ—¥æœŸçš„ JavaScript åº“ï¼Œå’Œ Moment.js çš„ API è®¾è®¡ä¿æŒå®Œå…¨ä¸€æ ·ã€‚

- Day.js å¯ä»¥è¿è¡Œåœ¨æµè§ˆå™¨å’Œ Node.js ä¸­ã€‚ 
- ğŸ•’ å’Œ Moment.js ç›¸åŒçš„ API å’Œç”¨æ³• 
- ğŸ’ª ä¸å¯å˜æ•°æ® (Immutable) 
- ğŸ”¥ æ”¯æŒé“¾å¼æ“ä½œ (Chainable) 
- ğŸŒ å›½é™…åŒ– I18n 
- ğŸ“¦ ä»… 2kb å¤§å°çš„å¾®å‹åº“ 
- ğŸ‘« å…¨æµè§ˆå™¨å…¼å®¹ 

ä¸‹é¢æ˜¯å…·ä½“çš„æ“ä½œæµç¨‹ã€‚

å®‰è£… dayjsï¼š
```shell
npm i dayjs
```
åˆ›å»ºå°è£… `utils/dayjs.js`ï¼š
```js
import dayjs from 'dayjs'

// åŠ è½½ä¸­æ–‡è¯­è¨€åŒ…
import 'dayjs/locale/zh-cn'

// å¯¼å…¥å¾—åˆ°ç›¸å¯¹æ—¶é—´æ’ä»¶
import rTime from 'dayjs/plugin/relativeTime'
dayjs.extend(rTime)

// é…ç½®è¯­éŸ³åŒ…ä¸ºå…¨å±€ä½¿ç”¨
dayjs.locale('zh-cn')

// å®šä¹‰ä¸€ä¸ªå…¨å±€è¿‡æ»¤å™¨ å¯ä»¥åœ¨ä»»ä½•ç»„ä»¶çš„æ¨¡æ¿ä¸­ä½¿ç”¨
// ç›¸å½“äºå…¨å±€æ–¹æ³• åªèƒ½ä¾›æ¨¡æ¿ä½¿ç”¨

export const relativeTime = value => dayjs().to(dayjs(value))

// å…¨å±€æ³¨å†Œï¼Œå¤šæ–‡ä»¶è°ƒç”¨
export default {
  /**
   * vueæä¾›installå¯ä¾›æˆ‘ä»¬å¼€å‘æ–°çš„æ’ä»¶åŠå…¨å±€æ³¨å†Œç»„ä»¶ç­‰
   * @param1 {*} Vue vueçš„æ„é€ å™¨ï¼Œ
   * @param2 æ˜¯å¯é€‰çš„é€‰é¡¹å¯¹è±¡
   */
  install (Vue) {
    /**
     * ç›¸å¯¹æ—¶é—´å…¨å±€è¿‡æ»¤å™¨
     *
     * params1: è¿‡æ»¤å™¨åç§°
     * params2: è¿‡æ»¤å™¨å‡½æ•°
     * ä½¿ç”¨æ–¹å¼ {{ è¡¨è¾¾å¼ | è¿‡æ»¤å™¨åç§° }}
     * ç®¡é“ç¬¦å‰é¢çš„è¡¨è¾¾å¼ç»“æœä¼šä½œä¸ºå‚æ•°ä¼ é€’åˆ°è¿‡æ»¤å™¨å‡½æ•°ä¸­
     * è¿‡æ»¤å™¨çš„è¿”å›å€¼ä¼šæ¸²æŸ“åˆ°ä½¿ç”¨è¿‡æ»¤å™¨çš„æ¨¡æ¿ä½ç½®
     */
    Vue.filter('relativeTime', relativeTime)
  }
}
```
åœ¨ `main.js` ä¸­åŠ è½½åˆå§‹åŒ–ï¼š
```js
// åŠ è½½ dayjs åˆå§‹åŒ–é…ç½®
import dayjs from '@/utils/dayjs'
Vue.use(dayjs)
```

ä½¿ç”¨è¿‡æ»¤å™¨ï¼š
```vue
<span>{{ article.pubdate | relativeTime }}</span>
```

## åé¦ˆæ“ä½œ

### å±•ç¤ºåé¦ˆçš„åŠ¨ä½œé¢æ¿

> åŸºäº Vant çš„ `ActionSheet` åŠ¨ä½œé¢æ¿ç»„ä»¶

1. `\src\components\article-item\index.vue`å£°æ˜**åŠ¨ä½œé¢æ¿**å¯¹åº”çš„ DOM ç»“æ„ï¼š
```html
<!-- æ–‡ç« çš„ä¿¡æ¯ -->
<van-cell></van-cell>

<!-- åé¦ˆçš„åŠ¨ä½œé¢æ¿ -->
<van-action-sheet v-model="show" cancel-text="å–æ¶ˆ" :closeable="false">
  <div class="content">å†…å®¹</div>
</van-action-sheet>
```

2. åœ¨ ArtItem.vue ç»„ä»¶çš„ data ä¸­å£°æ˜å¸ƒå°”å€¼ showï¼Œç”¨æ¥æ§åˆ¶åŠ¨ä½œé¢æ¿çš„æ˜¾ç¤ºä¸éšè—ï¼š
```js
data() {
  return {
    // æ˜¯å¦å±•ç¤ºåé¦ˆé¢æ¿
    show: false
  }
}
```
3. åœ¨ç‚¹å‡» `ArtItem.vue` ç»„ä»¶ä¸­çš„â€œå…³é—­æŒ‰é’®â€æ—¶ï¼Œå±•ç¤ºåé¦ˆçš„åŠ¨ä½œé¢æ¿ï¼š
```html
<!-- å…³é—­æŒ‰é’® -->
<!-- é€šè¿‡ .stop äº‹ä»¶ä¿®é¥°ç¬¦ï¼Œé˜»æ­¢ç‚¹å‡»äº‹ä»¶çš„å†’æ³¡ -->
<van-icon name="cross" @click.stop="show = true" />
```

### æ¸²æŸ“ä¸€çº§åé¦ˆé¢æ¿çš„ç»“æ„

> åŸºäº Vant çš„ `Cell` å•å…ƒæ ¼ç»„ä»¶

1. åœ¨ `ArtItem.vue` ç»„ä»¶çš„åé¦ˆåŠ¨ä½œé¢æ¿ä¸­ï¼Œå£°æ˜å¦‚ä¸‹çš„ä¸€çº§åé¦ˆé¢æ¿å¯é€‰é¡¹ï¼š
```html
<!-- åé¦ˆçš„åŠ¨ä½œé¢æ¿ -->
<van-action-sheet v-model="show" cancel-text="å–æ¶ˆ" :closeable="false">
  <!-- ç¬¬ä¸€çº§åé¦ˆé¢æ¿ -->
  <div>
    <van-cell title="aaa" clickable class="center-title" />
    <van-cell title="aaa" clickable class="center-title" />
    <van-cell title="aaa" clickable class="center-title" />
  </div>
</van-action-sheet>
```

2. åœ¨ `ArtItem.vue` ç»„ä»¶çš„ `<style>` èŠ‚ç‚¹ä¸‹ï¼Œå£°æ˜ `center-title` ç±»åï¼š
```less
.center-title {
  text-align: center;
}
```

3. åœ¨ `ArtItem.vue` ç»„ä»¶çš„ `data` ä¸­å£°æ˜å¦‚ä¸‹çš„ `actions` å¯é€‰é¡¹æ•°ç»„ï¼š
```js
data() {
  return {
    // ç¬¬ä¸€ä¸ªé¢æ¿çš„å¯é€‰é¡¹åˆ—è¡¨
    actions: [
      { name: 'ä¸æ„Ÿå…´è¶£' },
      { name: 'åé¦ˆåƒåœ¾å†…å®¹' },
      { name: 'æ‹‰é»‘ä½œè€…' }
    ]
  }
}
```

4. åŸºäº `v-for` æŒ‡ä»¤ï¼Œå¾ªç¯æ¸²æŸ“ä¸€çº§åé¦ˆé¢æ¿çš„å¯é€‰é¡¹åˆ—è¡¨ï¼š
```html
<!-- åé¦ˆçš„åŠ¨ä½œé¢æ¿ -->
<van-action-sheet v-model="show" cancel-text="å–æ¶ˆ" :closeable="false">
  <!-- ç¬¬ä¸€çº§åé¦ˆé¢æ¿ -->
  <div>
    <!-- å¾ªç¯æ¸²æŸ“å¯é€‰é¡¹ -->
    <van-cell :title="item.name" clickable class="center-title" v-for="item in actions" :key="item.name" />
  </div>
</van-action-sheet>
```

### ç‚¹å‡»ä¸€çº§é€‰é¡¹
1. ä¸ºä¸€çº§é€‰é¡¹ç»‘å®šåä¸º `onCellClick` çš„ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°ï¼ŒåŒæ—¶æŠŠå½“å‰é€‰é¡¹çš„ `name` ä½œä¸ºå‚æ•°ï¼Œä¼ é€’ç»™äº‹ä»¶å¤„ç†å‡½æ•°ï¼š
```html
<!-- ä¸€çº§é€‰é¡¹ -->
<van-cell :title="item.name" clickable class="center-title" v-for="item in actions" :key="item.name" @click="onCellClick(item.name)" />
```

2. åœ¨ `ArtItem.vue` ç»„ä»¶çš„ `methods` èŠ‚ç‚¹ä¸‹ï¼Œå£°æ˜ `onCellClick` æ–¹æ³•å¦‚ä¸‹ï¼š
```js
methods: {
  // ä¸€çº§é€‰é¡¹çš„ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°
  onCellClick(name) {
    if (name === 'ä¸æ„Ÿå…´è¶£') {
      console.log('ä¸æ„Ÿå…´è¶£')
      this.show = false

    } else if (name === 'æ‹‰é»‘ä½œè€…') {
      console.log('æ‹‰é»‘ä½œè€…')
      this.show = false

    } else if (name === 'åé¦ˆåƒåœ¾å†…å®¹') {
      // TODOï¼šå±•ç¤ºäºŒçº§åé¦ˆé¢æ¿
    }
  }
}
```

### æ¸²æŸ“äºŒçº§åé¦ˆé¢æ¿çš„ç»“æ„

1. åœ¨ `ArtItem.vue` ç»„ä»¶çš„åé¦ˆåŠ¨ä½œé¢æ¿ä¸­ï¼Œå£°æ˜å¦‚ä¸‹çš„äºŒçº§åé¦ˆé¢æ¿ï¼š
```html
<!-- åé¦ˆçš„åŠ¨ä½œé¢æ¿ -->
<van-action-sheet v-model="show" cancel-text="å–æ¶ˆ" :closeable="false">
  <!-- ç¬¬ä¸€çº§åé¦ˆé¢æ¿ -->
  <div>
    <van-cell :title="item.name" clickable class="center-title" v-for="item in actions" :key="item.name" @click="onCellClick(item.name)" />
  </div>
  <!-- ç¬¬äºŒçº§åé¦ˆé¢æ¿ -->
  <div>
    <van-cell title="è¿”å›" clickable title-class="center-title" />
  </div>
</van-action-sheet>
```

2. åœ¨ `ArtItem.vue` ç»„ä»¶çš„ `data` èŠ‚ç‚¹ä¸‹ï¼Œå®šä¹‰åä¸º `isFirst` çš„å¸ƒå°”å€¼ï¼Œç”¨æ¥æ§åˆ¶æ˜¯å¦å±•ç¤ºç¬¬ä¸€ä¸ªé¢æ¿ï¼š
```js
data() {
  // çœç•¥å…¶å®ƒæ•°æ®é¡¹...

  // æ˜¯å¦å±•ç¤ºç¬¬ä¸€ä¸ªåé¦ˆé¢æ¿
  isFirst: true
}
```

3. åœ¨ `ArtItem.vue` ç»„ä»¶ä¸­çš„åé¦ˆåŠ¨ä½œé¢æ¿ä¸­ï¼Œç»“åˆ `v-if` ä¸ `v-else` æŒ‡ä»¤ï¼ŒæŒ‰éœ€å±•ç¤ºå¯¹åº”çš„åé¦ˆé¢æ¿ï¼š
```html
<van-action-sheet v-model="show" cancel-text="å–æ¶ˆ" :closeable="false">
  <!-- ç¬¬ä¸€çº§åé¦ˆé¢æ¿ -->
  <div v-if="isFirst">
    <van-cell :title="item.name" clickable class="center-title" v-for="item in actions" :key="item.name" @click="onCellClick(item.name)" />
  </div>
  <!-- ç¬¬äºŒçº§åé¦ˆé¢æ¿ -->
  <div v-else>
    <van-cell title="è¿”å›" clickable title-class="center-title" />
  </div>
</van-action-sheet>
```

4. ç‚¹å‡»ä¸€çº§åé¦ˆé¢æ¿ä¸­çš„åé¦ˆåƒåœ¾å†…å®¹é€‰é¡¹æ—¶ï¼Œå°† `isFirst` è®¾ç½®ä¸º `false`ï¼Œä»è€Œå±•ç¤ºäºŒçº§åé¦ˆé¢æ¿ï¼š
```js
else if (name === 'åé¦ˆåƒåœ¾å†…å®¹') {
  // TODOï¼šå±•ç¤ºäºŒçº§åé¦ˆé¢æ¿
  this.isFirst = false
}
```

5. å½“ç‚¹å‡»äºŒçº§åé¦ˆé¢æ¿ä¸­çš„è¿”å›æ—¶ï¼Œå°† `isFirst` è®¾ç½®ä¸º `true`ï¼Œä»è€Œå±•ç¤ºä¸€çº§åé¦ˆé¢æ¿ï¼š
```html
<!-- ç¬¬äºŒçº§åé¦ˆé¢æ¿ -->
<div v-else>
  <van-cell title="è¿”å›" clickable title-class="center-title" @click="isFirst = true" />
</div>
```

6. ç›‘å¬ `<van-action-sheet>` çš„ `@closed` äº‹ä»¶ï¼Œå½“åŠ¨ä½œé¢æ¿å®Œå…¨å…³é—­ä¸”ç»“æŸåŠ¨ç”»ä»¥åï¼Œå°† `isFirst` è®¾ç½®ä¸º `true`ã€‚ä¿è¯ä¸‹æ¬¡æ‰“å¼€åŠ¨ä½œé¢æ¿æ—¶ï¼Œé»˜è®¤å±•ç¤ºç¬¬ä¸€ä¸ªåé¦ˆé¢æ¿ï¼š
```html
<!-- åé¦ˆçš„åŠ¨ä½œé¢æ¿ -->
<van-action-sheet v-model="show" cancel-text="å–æ¶ˆ" :closeable="false" @closed="isFirst = true">
  <!-- çœç•¥å…¶å®ƒä»£ç  -->
</van-action-sheet>
```

### æ¸²æŸ“äºŒçº§åé¦ˆé¢æ¿çš„æ•°æ®

1. åœ¨ `/src/api/` ç›®å½•ä¸‹ï¼Œæ–°å»º `reports.api.js` æ¨¡å—ï¼Œç”¨æ¥å®šä¹‰ç¬¬äºŒä¸ªåé¦ˆé¢æ¿è¦ç”¨åˆ°çš„åˆ—è¡¨æ•°æ®ï¼š
```js
// ä»¥æ¨¡å—çš„æ–¹å¼å¯¼å‡º"ä¸¾æŠ¥æ–‡ç« "æ—¶ï¼Œåç«¯æ¥å£çº¦å®šçš„ä¸¾æŠ¥ç±»å‹
const reports = [
  {
    type: 0,
    label: 'å…¶å®ƒé—®é¢˜'
  },
  {
    type: 1,
    label: 'æ ‡é¢˜å¤¸å¼ '
  },
  {
    type: 2,
    label: 'ä½ä¿—è‰²æƒ…'
  },
  {
    type: 3,
    label: 'é”™åˆ«å­—å¤š'
  },
  {
    type: 4,
    label: 'æ—§é—»é‡å¤'
  },
  {
    type: 6,
    label: 'å†…å®¹ä¸å®'
  },
  {
    type: 8,
    label: 'ä¾µæƒ'
  },
  {
    type: 5,
    label: 'å¹¿å‘Šè½¯æ–‡'
  },
  {
    type: 7,
    label: 'æ¶‰å«Œè¿æ³•çŠ¯ç½ª'
  }
]
export default reports
```

2. åœ¨ ArtItem.vue ç»„ä»¶ä¸­ï¼Œå¯¼å…¥ /src/api/reports.api.js æ¨¡å—ï¼š
```js
import reports from '@/api/reports.api'
```

3. å¹¶å°†å¯¼å…¥å¾—åˆ°çš„ `reports` æ•°ç»„æŒ‚è½½ä¸º `ArtItem.vue` ç»„ä»¶çš„ `data` æ•°æ®ï¼Œä¾›æ¨¡æ¿ç»“æ„è¿›è¡Œ v-for å¾ªç¯çš„æ¸²æŸ“ï¼š
```js
data() {
  return {
    // çœç•¥å…¶å®ƒæ•°æ®é¡¹...

    // ç¬¬äºŒä¸ªé¢æ¿çš„å¯é€‰é¡¹åˆ—è¡¨ï¼Œæ•°ç»„ä¸­æ¯ä¸€é¡¹çš„æ ¼å¼ { type, label }
    reports
  }
}
```

4. åœ¨ `ArtItem.vue` ç»„ä»¶çš„æ¨¡æ¿ç»“æ„ä¸­ï¼Œå¾ªç¯æ¸²æŸ“äºŒçº§åé¦ˆé¢æ¿çš„å¯é€‰é¡¹åˆ—è¡¨ï¼š
```html
<!-- ç¬¬äºŒçº§åé¦ˆé¢æ¿ -->
<div v-else>
  <van-cell title="è¿”å›" clickable title-class="center-title" @click="isFirst = true" />
  <van-cell :title="item.label" clickable title-class="center-title" v-for="item in reports" :key="item.type" />
</div>
```

### æŒ‡å®šåŠ¨ä½œé¢æ¿çš„æŒ‚è½½ä½ç½®
1. é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ˜¯åœ¨ `ArtItem.vue` ç»„ä»¶ä¸­ä½¿ç”¨çš„ `<van-action-sheet>` ç»„ä»¶ï¼Œå› æ­¤åŠ¨ä½œé¢æ¿çš„ `DOM` ç»“æ„ä¼šè¢«æ¸²æŸ“åˆ° `List` åˆ—è¡¨ç»„ä»¶ å†…éƒ¨
    - å¯¼è‡´çš„é—®é¢˜ï¼šåŠ¨ä½œé¢æ¿ä¸­çš„å†…å®¹ä¸Šä¸‹æ»‘åŠ¨æ—¶ï¼Œä¼šå¯¼è‡´ `List` åˆ—è¡¨ç»„ä»¶çš„ ä¸‹æ‹‰åˆ·æ–°
    - è§£å†³æ–¹æ¡ˆï¼šæŠŠ `ActionList` ç»„ä»¶ï¼Œé€šè¿‡ `get-container` å±æ€§ï¼ŒæŒ‚è½½åˆ° `body` å…ƒç´ ä¸‹ï¼š
```html
<van-action-sheet v-model="show" cancel-text="å–æ¶ˆ" :closeable="false" @closed="isFirst = true" get-container="body">
  <!-- çœç•¥å…¶å®ƒä»£ç  -->
</van-action-sheet>
```

### å°†æ–‡ç« è®¾ç½®ä¸ºä¸æ„Ÿå…´è¶£
1. åœ¨ `/src/api/home.api.js` æ¨¡å—ä¸­ï¼Œå®šä¹‰åä¸º `reqDislikeArticle` çš„æ–¹æ³•ï¼Œç”¨æ¥å°†æŒ‡å®š id çš„æ–‡ç« è®¾ç½®ä¸ºä¸æ„Ÿå…´è¶£ï¼š
```js
/**
 * å°†æ–‡ç« è®¾ç½®ä¸ºä¸æ„Ÿå…´è¶£
 * @param {*} id æ–‡ç« çš„ id
 * @returns
 */
export const reqDislikeArticle = id => request.post('/article/dislikes', {
  target: id
})
```

2. åœ¨ `ArtItem.vue` ç»„ä»¶ä¸­ï¼ŒæŒ‰éœ€å¯¼å…¥ `API` æ¥å£ï¼š
```js
// æŒ‰éœ€å¯¼å…¥ API æ¥å£
import { reqDislikeArticle } from '@/api/home.api.js'
```
3. åœ¨ `ArtItem.vue` ç»„ä»¶ä¸­ï¼ŒåŸºäº `props` ä¸­çš„ `article` æ–‡ç« å¯¹è±¡ï¼Œå®šä¹‰åä¸º `artId` çš„è®¡ç®—å±æ€§ï¼š
```js
props: {
  // æ–‡ç« çš„ä¿¡æ¯å¯¹è±¡
  article: {
    type: Object, // æ•°æ®ç±»å‹
    required: true // å¿…å¡«é¡¹
  }
},

computed: {
  // æ–‡ç«  Id çš„è®¡ç®—å±æ€§
  artId() {
    // æ³¨æ„ï¼šæ–‡ç« å¯¹è±¡çš„ art_id æ˜¯å¤§æ•°å¯¹è±¡ï¼Œéœ€è¦è°ƒç”¨ .toString() æ–¹æ³•è½¬æ¢ä¸ºå­—ç¬¦ä¸²å½¢å¼
    return this.article.art_id.toString()
  }
}
```

4. åœ¨ `onCellClick` å¤„ç†å‡½æ•°ä¸­ï¼Œè°ƒç”¨ `API` æ¥å£ï¼Œå°†æŒ‡å®š `Id` çš„æ–‡ç« è®¾ç½®ä¸æ„Ÿå…´è¶£ï¼š
```js
// ä¸€çº§é€‰é¡¹çš„ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°
async onCellClick(name) {
  if (name === 'ä¸æ„Ÿå…´è¶£') {
    // è°ƒç”¨ API æ¥å£ï¼Œå°†æ–‡ç« è®¾ç½®ä¸ºä¸æ„Ÿå…´è¶£
    const { data: res } = await reqDislikeArticle(this.artId)
    if (res.message === 'OK') {
      // TODOï¼šç‚¸æ¥¼çš„æ“ä½œ
    }
    this.show = false
  }

  // çœç•¥å…¶å®ƒä»£ç ...
}
```

### ä»åˆ—è¡¨ä¸­ç§»é™¤ä¸æ„Ÿå…´è¶£çš„æ–‡ç« 
1. åœ¨ `ArtItem.vue` ç»„ä»¶ä¸­ï¼Œé€šè¿‡ `this.$emit()` è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼ŒæŠŠè¦åˆ é™¤çš„æ–‡ç«  `Id` ä¼ é€’ç»™çˆ¶ç»„ä»¶ï¼š
```js
// ä¸€çº§é€‰é¡¹çš„ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°
async onCellClick(name) {
  if (name === 'ä¸æ„Ÿå…´è¶£') {
    // è°ƒç”¨ API æ¥å£ï¼Œå°†æ–‡ç« è®¾ç½®ä¸ºä¸æ„Ÿå…´è¶£
    const { data: res } = await dislikeArticleAPI(this.artId)
    if (res.message === 'OK') {
      // TODOï¼šç‚¸æ¥¼çš„æ“ä½œï¼Œè§¦å‘è‡ªå®šä¹‰çš„äº‹ä»¶ï¼Œå°†æ–‡ç«  id å‘é€ç»™çˆ¶ç»„ä»¶
      this.$emit('remove-article', this.artId)
    }
    this.show = false
  }

  // çœç•¥å…¶å®ƒä»£ç ...
}
```

2. åœ¨ `ArtList.vue` ç»„ä»¶ä¸­ä½¿ç”¨ `ArtItem.vue` ç»„ä»¶æ—¶ï¼Œç›‘å¬ `ArtItem.vue` ç»„ä»¶çš„ `@remove-article` äº‹ä»¶ï¼š
```html
<!-- å¾ªç¯æ¸²æŸ“æ–‡ç« çš„åˆ—è¡¨ -->
<art-item
   v-for="item in artlist"
   :key="item.art_id.toString()"
   :article="item"
   @remove-article="removeArticle"
  >
</art-item>
```

3. åœ¨ `ArtList.vue` ç»„ä»¶çš„ `methods` ä¸­ï¼Œå£°æ˜ `removeArticle` æ–¹æ³•å¦‚ä¸‹ï¼š
```js
methods: {
  // ä»æ–‡ç« åˆ—è¡¨ä¸­ç§»é™¤æŒ‡å®š id çš„æ–‡ç« 
  removeArticle(id) {
    // å¯¹åŸæ•°ç»„è¿›è¡Œ filter æ–¹æ³•çš„è¿‡æ»¤
    this.artlist = this.artlist.filter(item => item.art_id.toString() !== id)
 }
}
```

### ç‚¸æ¥¼ä¹‹åé˜²æ­¢ä¸Šæ‹‰åŠ è½½ä¸ç”Ÿæ•ˆ
> é—®é¢˜æè¿°ï¼šç‚¸æ¥¼ä¹‹åï¼Œå¦‚æœæ–‡ç« åˆ—è¡¨çš„æ•°æ®ä¸è¶³ä»¥æ’‘æ»¡æ•´ä¸ªå±å¹•ï¼Œä¼šå¯¼è‡´ä¸Šæ‹‰åŠ è½½å’Œä¸‹æ‹‰åˆ·æ–°ä¸ç”Ÿæ•ˆçš„é—®é¢˜
> 
> è§£å†³æ–¹æ¡ˆï¼šæ¯æ¬¡ç‚¸æ¥¼ä¹‹åï¼Œåˆ¤æ–­å‰©ä½™æ•°æ®çš„æ–‡ç« æ•°é‡æ˜¯å¦å°äº 10ï¼Œå¦‚æœå°äº 10ï¼Œåˆ™ä¸»åŠ¨è¯·æ±‚ä¸‹ä¸€é¡µçš„æ•°æ®

- åœ¨ `ArtList.vue` ç»„ä»¶çš„ `methods` èŠ‚ç‚¹ä¸‹ï¼Œæ”¹é€  `removeArticle` æ–¹æ³•ï¼š
```js
methods: {
  // ä»æ–‡ç« åˆ—è¡¨ä¸­ç§»é™¤æŒ‡å®š id çš„æ–‡ç« 
  removeArticle(id) {
    // 1. ç‚¸æ¥¼æ“ä½œ
    this.list = this.list.filter(item => item.art_id.toString() !== id)

    // 2. åˆ¤æ–­å‰©ä½™æ•°æ®çš„æ–‡ç« æ•°é‡æ˜¯å¦å°äº 10
    if (this.list.length < 10) {
      // ä¸»åŠ¨è¯·æ±‚ä¸‹ä¸€é¡µçš„æ•°æ®
      this.initArtList()
    }
  }
}
```

### å®ç°ä¸¾æŠ¥æ–‡ç« çš„åŠŸèƒ½
1. åœ¨ `/sr/api/home.api.js` æ¨¡å—ä¸­ï¼Œå®šä¹‰ `reqReportArticle` çš„æ–¹æ³•ï¼Œç”¨æ¥å®ç°ä¸¾æŠ¥æ–‡ç« çš„åŠŸèƒ½ï¼š
```js
// ä¸¾æŠ¥æ–‡ç« çš„ API
export const reportArticleAPI = (target, type) => {
  return request.post('/v1_0/article/reports', {
    target, // æ–‡ç« çš„ Id
    type // ä¸¾æŠ¥çš„ç±»å‹
  })
}
```

2. åœ¨ `ArtItem.vue` ç»„ä»¶ä¸­ï¼ŒæŒ‰éœ€å¯¼å…¥ä¸¾æŠ¥æ–‡ç« çš„ `API` æ¥å£ï¼š
```js
// æŒ‰éœ€å¯¼å…¥ API æ¥å£
import { reqDislikeArticle, reqReportArticle } from '@/api/home.api.js'
```

3. åœ¨ `ArtItem.vue` ç»„ä»¶ä¸­ï¼Œä¸ºäºŒçº§åé¦ˆé¢æ¿ä¸­çš„é€‰é¡¹ï¼Œç»‘å®šç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå°†ä¸¾æŠ¥çš„ç±»å‹ä½œä¸ºå‚æ•°ï¼Œä¼ é€’åˆ°äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼š
```html
<!-- ç¬¬äºŒçº§åé¦ˆé¢æ¿ -->
<div v-else>
  <van-cell title="è¿”å›" clickable title-class="center-title" @click="isFirst = true" />
  <van-cell :title="item.label" clickable title-class="center-title" v-for="item in reports" :key="item.type" @click="reportArticle(item.type)" />
</div>
```

4. åœ¨ `ArtItem.vue` ç»„ä»¶çš„ `methods` èŠ‚ç‚¹ä¸‹ï¼Œå®šä¹‰åä¸º `reportArticle` çš„ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°ï¼š
```js
methods: {
  // ä¸¾æŠ¥æ–‡ç« ï¼ˆå½¢å‚ type æ˜¯ä¸¾æŠ¥çš„ç±»å‹å€¼ï¼‰
  async reportArticle(type) {
    // 1. å‘èµ·ä¸¾æŠ¥æ–‡ç« çš„è¯·æ±‚
    const { data: res } = await reqReportArticle(this.artId, type)
    if (res.message === 'OK') {
      // 2. ç‚¸æ¥¼æ“ä½œï¼Œè§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼ŒæŠŠæ–‡ç«  Id å‘é€ç»™çˆ¶ç»„ä»¶
      this.$emit('remove-article', this.artId)
    }
    // 3. å…³é—­åŠ¨ä½œé¢æ¿
    this.show = false
  }
}
```

## é¢‘é“ç¼–è¾‘

### æ¸²æŸ“é¢‘é“ç®¡ç†çš„ DOM ç»“æ„

> åŸºäº Vant æä¾›çš„ `Popup` å¼¹å‡ºå±‚ç»„ä»¶

1. åœ¨ `/src/views/Home/index.vue` ç»„ä»¶ä¸­ï¼Œåœ¨é¢‘é“ç®¡ç†çš„å°å›¾æ ‡ä¸‹é¢ï¼ŒåŸºäº `<van-popup>` æ¸²æŸ“å‡ºé¢‘é“ç®¡ç†çš„å¼¹å‡ºå±‚ï¼š
```html
<van-popup
  v-model="isChannelEditShow"
  position="bottom"
  class="channel-edit-popup"
  closeable
  close-icon-position="top-left"
  get-container="body"
  style="height: 100%"
/>
```
2. åœ¨ `data` ä¸­æ·»åŠ ä¸€ä¸ªæ•°æ®ç”¨æ¥æ§åˆ¶å¼¹å±‚çš„æ˜¾ç¤ºå’Œéšè—
```js
data () {
  return {
    ...
    // æ§åˆ¶é¢‘é“ç®¡ç†å¼¹å‡ºå±‚çš„å±•ç¤ºä¸éšè—
    isChannelEditShow: false
  }
}
```
3. ä¸º `<van-popup>` ç»„ä»¶ç»‘å®š `:close-on-click-overlay="false"` å±æ€§ï¼Œä»è€Œé˜²æ­¢ç‚¹å‡»é®ç½©å±‚æ—¶ï¼Œå¼¹å‡ºå±‚è‡ªåŠ¨å…³é—­çš„æ•ˆæœï¼š
```html
<!-- é¢‘é“ç®¡ç†çš„å¼¹å‡ºå±‚ -->
<van-popup v-model="isChannelEditShow" :close-on-click-overlay="false">å†…å®¹</van-popup>
```

4. å®ç°é¢‘é“ç®¡ç†çš„åŸºç¡€å¸ƒå±€
```vue
<template>
  <div class="channel-edit">
    <van-cell title="æˆ‘çš„é¢‘é“" :border="false">
      <van-button
        size="mini"
        round
        type="danger"
        plain
      >ç¼–è¾‘</van-button>
    </van-cell>
    <van-grid :gutter="10">
      <van-grid-item
        class="channel-item"
        v-for="value in 8"
        :key="value"
        text="æ–‡å­—"
      />
    </van-grid>
    <van-cell title="é¢‘é“æ¨è" :border="false"></van-cell>
    <van-grid :gutter="10">
      <van-grid-item
        class="channel-item"
        v-for="value in 8"
        :key="value"
        text="æ–‡å­—"
      />
    </van-grid>
  </div>
</template>

<script>
export default {
  name: 'ChannelEdit',
  components: {},
  props: {},
  data () {
    return {}
  },
  computed: {},
  watch: {},
  created () {},
  mounted () {},
  methods: {}
}
</script>

<style scoped lang="less">
.channel-edit {
  .channel-item {
    height: 86px;
    /deep/ .van-grid-item__content {
      background-color: #f5f5f6;
      .van-grid-item__text {
        color: #222;
        font-size: 28px;
      }
    }
  }
}
</style>
```

### åŠ¨æ€è®¡ç®—æ›´å¤šé¢‘é“çš„åˆ—è¡¨æ•°æ®

> åå°æ²¡æœ‰æä¾›ç›´æ¥è·å–æ›´å¤šé¢‘é“çš„ API æ¥å£ï¼Œéœ€è¦ç¨‹åºå‘˜åŠ¨æ€åœ°è¿›è¡Œè®¡ç®—ï¼š
> æ›´å¤šé¢‘é“ = æ‰€æœ‰é¢‘é“ - æˆ‘çš„é¢‘é“
> æ­¤æ—¶ï¼Œéœ€è¦å…ˆè·å–åˆ°æ‰€æœ‰é¢‘é“åœ°åˆ—è¡¨æ•°æ®ï¼Œå†ä½¿ç”¨è®¡ç®—å±æ€§åŠ¨æ€åœ°è¿›è¡Œç­›é€‰å³å¯

1. è¯·æ±‚æ‰€æœ‰é¢‘é“çš„åˆ—è¡¨æ•°æ®
åœ¨ `/src/api/home.api.js` æ¨¡å—ä¸­ï¼Œå®šä¹‰åä¸º `reqGetAllChannel` çš„æ–¹æ³•ï¼Œç”¨æ¥è¯·æ±‚æ‰€æœ‰é¢‘é“åˆ—è¡¨çš„æ•°æ®ï¼š
```js
/**
 * è¯·æ±‚å…¨éƒ¨é¢‘é“åˆ—è¡¨
 * @returns
 */
export const reqGetChannel = () => request.get('/channels')
```

2. åœ¨ `channel-edit.vue` ç»„ä»¶ä¸­ï¼ŒæŒ‰éœ€å¯¼å…¥ `reqGetChannel` æ–¹æ³•ï¼š
```js
// æŒ‰éœ€å¯¼å…¥ API æ¥å£
import { reqGetChannel } from '@/api/home.api'
```
3. `src\store\modules\home.store.js`
```js
    /**
     * æ¨èé¢‘é“åˆ—è¡¨
     * @param {*} param0
     * @returns
     */
    async getRecommendChannels ({ commit }) {
      const res = await reqGetChannel()
      if (res.message === 'OK') {
        commit('getRecommendChannels', res.data.channels)
        return 'ok'
      } else {
        return Promise.reject(new Error('failed'))
      }
    },
```
```js
    /**
     * æ¨èé¢‘é“åˆ—è¡¨
     * @param {*} state
     * @param {*} channels æ¨èé¢‘é“åˆ—è¡¨
     */
    getRecommendChannels (state, channels) {
      // 1. å¯¹æ•°ç»„è¿›è¡Œ filter è¿‡æ»¤ï¼Œè¿”å›çš„æ˜¯ç¬¦åˆæ¡ä»¶çš„æ–°æ•°ç»„
      // åˆ¤æ–­å½“å‰å¾ªç¯é¡¹ï¼Œæ˜¯å¦åœ¨ â€œæˆ‘çš„é¢‘é“â€ åˆ—è¡¨ä¹‹ä¸­
      // å¦‚æœä¸åœ¨ï¼Œåˆ™ return trueï¼Œè¡¨ç¤ºéœ€è¦æŠŠè¿™ä¸€é¡¹å­˜å‚¨åˆ°è¿”å›çš„æ–°æ•°ç»„ä¹‹ä¸­
      state.recommendChannels = channels.filter(channel => !state.channels.find(myChannel => myChannel.id === channel.id))
    },
```
```js
  state: () => {
    return {
      // ç”¨æˆ·é¢‘é“åˆ—è¡¨
      channels: [],
      // æ¨èé¢‘é“åˆ—è¡¨
      recommendChannels: []
    }
  },
```
4. å£°æ˜`loadRecommendChannels`æ–¹æ³•ï¼š
```js
    /**
     * åŠ è½½æ¨èé¢‘é“
     */
    loadRecommendChannels () {
      try {
        this.$store.dispatch('home/getRecommendChannels')
      } catch (error) {
        this.$toast.fail('è·å–æ¨èé¢‘é“å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•')
      }
    },
```
```js
  mounted () {
    this.loadRecommendChannels()
  },
```
```html
      <van-grid class="recommend-grid" :gutter="10">
        <van-grid-item
        class="grid-item"
        icon="plus"
        v-for="recommendChannel in recommendChannels"
        :key="recommendChannel.id"
        :text="recommendChannel.name"
        />
      </van-grid>
```

### å®ç°æ–°å¢é¢‘é“çš„åŠŸèƒ½

æ€è·¯ï¼š

- ç»™æ¨èé¢‘é“åˆ—è¡¨ä¸­æ¯ä¸€é¡¹æ³¨å†Œç‚¹å‡»äº‹ä»¶
- è·å–ç‚¹å‡»çš„é¢‘é“é¡¹
- å°†é¢‘é“é¡¹æ·»åŠ åˆ°æˆ‘çš„é¢‘é“ä¸­
- å°†å½“å‰ç‚¹å‡»çš„é¢‘é“é¡¹ä»æ¨èé¢‘é“ä¸­ç§»é™¤ 
  - ä¸éœ€è¦åˆ é™¤ï¼Œå› ä¸ºæˆ‘ä»¬è·å–æ•°æ®ä½¿ç”¨çš„æ˜¯è®¡ç®—å±æ€§ï¼Œå½“æˆ‘é¢‘é“å‘ç”Ÿæ”¹å˜ï¼Œè®¡ç®—å±æ€§é‡æ–°æ±‚å€¼äº†

1. ä¸ºâ€œæ›´å¤šé¢‘é“â€ä¸‹çš„ `item` é¡¹ç»‘å®šç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå°†å½“å‰çš„é¢‘é“ä¿¡æ¯ä½œä¸ºå‚æ•°ï¼Œä¼ é€’ç»™ `addChannel` æ–¹æ³•ï¼š
```html
      <van-grid class="recommend-grid" :gutter="10">
        <van-grid-item
        class="grid-item"
        icon="plus"
        v-for="recommendChannel in recommendChannels"
        :key="recommendChannel.id"
        :text="recommendChannel.name"
        @click="onAddChannel(recommendChannel)"
        />
      </van-grid>
```

2. `src\store\modules\home.store.js`
```js
    /**
     * æ·»åŠ é¢‘é“(æœ¬åœ°)
     * @param {*} state
     * @param {*} channel éœ€è¦æ·»åŠ çš„é¢‘é“
     */
    changeChannels (state, channel) {
      // æ›¿æ¢æ—§å¯¹è±¡çš„æ–¹å¼è§¦å‘ mutations
      state.channels.push(channel)
      state.recommendChannels = state.recommendChannels.filter(recommendChannel => recommendChannel.id !== channel.id)
    },
```
```js
    /**
     * æ·»åŠ é¢‘é“(ç™»å½•)
     * @param {*} state
     * @param {*} channel id => é¢‘é“çš„id, seq => é¢‘é“çš„ä½ç½®(åœ¨æ•°ç»„æœ€åæ·»åŠ )
     */
    changeOnlineChannels (state, channel) {
      const name = state.recommendChannels.find(recommendChannel => recommendChannel.id === channel[0].id)
      state.channels.push(name)
      state.recommendChannels = state.recommendChannels.filter(recommendChannel => recommendChannel.id !== channel[0].id)
    },
```
4. `/src/api/home.api.js` æ¨¡å—ä¸­ï¼Œå£°æ˜å¦‚ä¸‹çš„ `API` æ¥å£ï¼Œç”¨æ¥å°†ç”¨æˆ·çš„é¢‘é“åˆ—è¡¨æ•°æ®æäº¤åˆ°æœåŠ¡å™¨ä¿å­˜ï¼š
```js
/**
 * æ ¹æ®é¢‘é“ Id è¯·æ±‚é¢‘é“ä¸‹çš„æ–‡ç« åˆ—è¡¨æ•°æ®
 * @param {*} id é¢‘é“çš„ Id
 * @param {*} time æ—¶é—´æˆ³
 * @returns
 */
export const reqGetArtList = (params) => request.get('/articles', {
  params
})
```
5. æŒ‰éœ€å¯¼å…¥ API æ¥å£ï¼š
```js
import { reqAddUserChannels, reqDeleteUserChannels, reqGetChannel, reqGetUserChannel } from '@/api/home.api'
```
```js
    /**
     * ç™»å½•çŠ¶æ€ä¸‹æ·»åŠ é¢‘é“
     * @param {*} param0
     * @param {*} param1 id => é¢‘é“çš„id, seq => é¢‘é“çš„ä½ç½®(åœ¨æ•°ç»„æœ€åæ·»åŠ )
     */
    async addUserChannels ({ commit }, { id, seq }) {
      const res = await reqAddUserChannels({ id, seq })
      if (res.message === 'æ›´æ–°ç”¨æˆ·é¢‘é“æˆåŠŸ') {
        commit('changeOnlineChannels', res.data.channels)
        return 'ok'
      } else {
        return Promise.reject(new Error('failed'))
      }
    },
```

6.  `onAddChannel` æ–¹æ³•ï¼Œç”¨æ¥æŠŠæœ€æ–°çš„ç”¨æˆ·é¢‘é“åˆ—è¡¨æ•°æ®ï¼Œæäº¤åˆ°åç«¯ä¿å­˜ï¼š
```js
    /**
     * æ·»åŠ é¢‘é“
     */
    onAddChannel (recommendChannel) {
      if (this.getLogin) {
        // å·²ç™»å½• è¯·æ±‚æ¥å£
        try {
          this.$store.dispatch('home/addUserChannels', {
            id: recommendChannel.id, // é¢‘é“id
            seq: this.myChannels.length // åºå·
          })
          // 3. é€šè¿‡ notify å¼¹æ¡†æç¤ºç”¨æˆ·æ›´æ–°æˆåŠŸ
          this.$notify({ type: 'success', message: 'æ›´æ–°æˆåŠŸ', duration: 1000 })
        } catch (error) {
          this.$toast.fail('æ·»åŠ é¢‘é“å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•')
        }
      } else {
        // æœªç™»å½• å­˜å‚¨åœ¨æœ¬åœ°
        this.$store.commit('home/changeChannels', recommendChannel)
      }
    },
```

### åˆ‡æ¢é¢‘é“

> åŠŸèƒ½éœ€æ±‚ï¼šåœ¨éç¼–è¾‘å™¨çŠ¶æ€ä¸‹åˆ‡æ¢é¢‘é“ã€‚

1. ç»™æˆ‘çš„é¢‘é“é¡¹æ³¨å†Œç‚¹å‡»äº‹ä»¶
```html
        <van-grid-item
        class="grid-item"
        v-for="(channel,index) in myChannels"
        :key="channel.id"
        @click="onMyChannelClick(channel,index)"
        >
```

2. å¤„ç†å‡½æ•°
```js
      // éç¼–è¾‘ => åˆ‡æ¢
        this.$emit('update-active', index, false)
```

3. åœ¨çˆ¶ç»„ä»¶ä¸­ç›‘å¬å¤„ç†è‡ªå®šä¹‰äº‹ä»¶
```js
    /**
     * å­ä¼ çˆ¶è‡ªå®šä¹‰äº‹ä»¶ @update-active çš„å›è°ƒå‡½æ•°
     * æ›´æ–°æ¿€æ´»é¡µç 
     */
    onUpdateActive (index, isChannelEditShow) {
      this.active = index
      this.isChannelEditShow = isChannelEditShow
    }
```
```html
<channel-edit :my-channels="channels" :active="active" @update-active="onUpdateActive"/>
```

4. è®©æ¿€æ´»é¢‘é“é«˜äº®

æ€è·¯ï¼š

- å°†é¦–é¡µä¸­çš„æ¿€æ´»çš„æ ‡ç­¾ç´¢å¼•ä¼ é€’ç»™é¢‘é“ç¼–è¾‘ç»„ä»¶
- åœ¨é¢‘é“ç¼–è¾‘ç»„ä»¶ä¸­éå†æˆ‘çš„é¢‘é“åˆ—è¡¨çš„æ—¶å€™åˆ¤æ–­éå†é¡¹çš„ç´¢å¼•æ˜¯å¦ç­‰äºæ¿€æ´»çš„é¢‘é“æ ‡ç­¾ç´¢å¼•ï¼Œå¦‚æœä¸€æ ·åˆ™ä½œç”¨ä¸€ä¸ªé«˜äº®çš„ `CSS` ç±»å

-  å°†é¦–é¡µç»„ä»¶ä¸­çš„ `active` ä¼ é€’åˆ°é¢‘é“ç¼–è¾‘ç»„ä»¶ä¸­
```html
<channel-edit :my-channels="channels" :active="active" @update-active="onUpdateActive"/>
```

- åœ¨é¢‘é“ç¼–è¾‘ç»„ä»¶ä¸­å£°æ˜ `props` æ¥æ”¶
```js
    active: {
      type: Number,
      required: true
    }
```

- åˆ¤æ–­éå†é¡¹ï¼Œå¦‚æœ `éå†é¡¹ç´¢å¼• === active`ï¼Œåˆ™ç»™è¿™ä¸ªé¢‘é“é¡¹è®¾ç½®é«˜äº®æ ·å¼
```html
<span slot="text" class="text" :class="{active: index === active}">{{channel.name}}</span>
```

### å®ç°åˆ é™¤é¢‘é“çš„åŠŸèƒ½

> åŠŸèƒ½éœ€æ±‚ï¼šåœ¨ç¼–è¾‘çŠ¶æ€ä¸‹åˆ é™¤é¢‘é“ã€‚

1. `data` èŠ‚ç‚¹ä¸‹å£°æ˜`isEdit`å’Œ`fixChannels`
```js
  data () {
    return {
      isEdit: false, // æ§åˆ¶ç¼–è¾‘çŠ¶æ€çš„æ˜¾ç¤º
      fixChannels: [0] // å›ºå®šé¢‘é“, ä¸å…è®¸è¢«åˆ é™¤
    }
  }
```

2. ç‚¹å‡»ç¼–è¾‘æŒ‰é’®çš„æ—¶å€™ï¼Œåˆ‡æ¢ `isEdit` çš„çŠ¶æ€ï¼š
```js
    /**
     * ç‚¹å‡»ç¼–è¾‘åˆ‡æ¢çŠ¶æ€
     */
    editCannel () {
      this.isEdit = !this.isEdit
    },
```

3. æ ¹æ® isEdit çš„çŠ¶æ€ï¼ŒåŠ¨æ€æ¸²æŸ“æŒ‰é’®çš„æ–‡æœ¬å’Œæç¤ºçš„æ–‡æœ¬ï¼š
```html
          <van-button
          class="edit-btn"
          type="danger"
          plain
          round
          size="mini"
          @click="editCannel"
          >{{isEdit ? 'å®Œæˆ' : 'ç¼–è¾‘'}}</van-button>
```

4. æ¸²æŸ“åˆ é™¤çš„å›¾æ ‡
```html
<van-icon slot="icon" name="clear"></van-icon>
```
- ä½¿ç”¨ `v-show` æ§åˆ¶å›¾æ ‡çš„æ˜¾ç¤ºä¸éšè—ï¼š
```html
<van-icon v-show="isEdit && !fixChannels.includes(channel.id)" slot="icon" name="clear"></van-icon>
```

5. å®ç°åˆ é™¤çš„åŠŸèƒ½

> æ³¨æ„ï¼š
> 
> â€œæ¨èâ€è¿™ä¸ªé¢‘é“ä¸å…è®¸è¢«åˆ é™¤
> ç”¨æˆ·çš„é¢‘é“åˆ—è¡¨ä¸­ï¼Œè‡³å°‘è¦åŒ…å«ä¸¤ä¸ªé¢‘é“

- ä¸ºç”¨æˆ·çš„é¢‘é“ `Item` é¡¹ç»‘å®šç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå‘½åä¸º `onMyChannelClick`ï¼š
```html
<!-- ç”¨æˆ·çš„é¢‘é“ Item é¡¹ -->
<div class="channel-item van-hairline--surround" @click="onMyChannelClick(channel,index)">
</div>
```
- åœ¨ methods ä¸­å£°æ˜ 
```js
    /**
     * åˆ é™¤ / ç¼–è¾‘ é¢‘é“
     */
    onMyChannelClick (channel, index) {
      if (this.isEdit) {
        // å¦‚æœæ˜¯å›ºå®šé¢‘é“ ç›´æ¥è¿”å›
        if (this.fixChannels.includes(channel.id)) return
        // ç¼–è¾‘ => åˆ é™¤
        if (this.getLogin) {
          // å·²ç™»å½•
          this.$store.dispatch('home/deleteUserChannels', channel.id)
        } else {
          // æœªç™»å½• æ•°æ®æ›´æ–°åˆ°æœ¬åœ°
          this.$store.commit('home/deleteChannels', { channel, index })
        }
        // å¦‚æœåˆ é™¤çš„ index åœ¨ è¢«æ¿€æ´»çš„é¢‘é“å‰é¢
        if (index <= this.active) {
          // æ¿€æ´»é¢‘é“çš„ç´¢å¼• -1
          // ç¬¬ä¸€ä¸ªå‚æ•° => è¦é«˜äº®çš„ç´¢å¼•
          // ç¬¬äºŒä¸ªå‚æ•° => æ˜¯å¦ç»§ç»­å¼€å¯å¼¹çª—
          this.$emit('update-active', this.active - 1, true)
        }
      } else {
      // éç¼–è¾‘ => åˆ‡æ¢
        this.$emit('update-active', index, false)
      }
    }
```

6. ä¼˜åŒ–åˆ é™¤çš„åŠŸèƒ½

- å¦‚æœé¢‘é“çš„åå­—æ˜¯â€œæ¨èâ€ï¼Œåˆ™ä¸æ¸²æŸ“åˆ é™¤çš„å°å›¾æ ‡
```js
v-show="isEdit && !fixChannels.includes(channel.id)"
```
```js
// å¦‚æœæ˜¯å›ºå®šé¢‘é“ ç›´æ¥è¿”å›
if (this.fixChannels.includes(channel.id)) return
```
- å¦‚æœ `myChannels` æ•°ç»„ä¸­ä»…å‰©ä¸‹ä¸¤ä¸ªé¢‘é“ï¼Œåˆ™ä¸æ¸²æŸ“åˆ é™¤çš„å°å›¾æ ‡ï¼š
```js
v-show="isEdit && !fixChannels.includes(channel.id) && myChannels.length> 2"
```
```js
        // å¦‚æœæ˜¯å›ºå®šé¢‘é“ æˆ– ä»…å‰©ä¸‹ä¸¤ä¸ªé¢‘é“ ç›´æ¥è¿”å›
        if (this.fixChannels.includes(channel.id) || this.myChannels.length === 2) return
```

7. **å¼¹å‡ºå±‚å…³é—­æ—¶é‡ç½®ç¼–è¾‘çš„çŠ¶æ€(v-modelçˆ¶å­é€šä¿¡)**

- å®ç°æ­¥éª¤ï¼š
    - å…è®¸ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶åœ¨ä½¿ç”¨ `v-model` æ—¶å®šåˆ¶ `prop` å’Œ `event`ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç»„ä»¶ä¸Šçš„ `v-model` ä¼šæŠŠ `value` ç”¨ä½œ`prop` ä¸”æŠŠ `input` ç”¨ä½œ `event`ï¼Œä½†æ˜¯ä¸€äº›è¾“å…¥ç±»å‹æ¯”å¦‚å•é€‰æ¡†å’Œå¤é€‰æ¡†æŒ‰é’®å¯èƒ½æƒ³ä½¿ç”¨ `value` `prop` æ¥è¾¾åˆ°ä¸åŒçš„ç›®çš„ã€‚ä½¿ç”¨ `model` é€‰é¡¹å¯ä»¥å›é¿è¿™äº›æƒ…å†µäº§ç”Ÿçš„å†²çªã€‚
    - å¦‚æœè¦å°†å±æ€§æˆ–äº‹ä»¶åç§°æ›´æ”¹ä¸ºå…¶ä»–åç§°ï¼Œåˆ™éœ€è¦åœ¨ `ChildComponent` ç»„ä»¶ä¸­æ·»åŠ  `model` é€‰é¡¹ï¼š
    - çˆ¶ç»„ä»¶ `v-model` ç»‘å®šå€¼
    - å­ç»„ä»¶ `props` æ¥æ”¶å€¼ï¼Œ`model`åŒ…å«ä¸¤ä¸ªå‚æ•° `prop`ï¼šv-modelæ¥æ”¶çš„å€¼ï¼Œ`event`ï¼š`v-model`å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘çš„æ–¹æ³•
- å­ç»„ä»¶
```js
export default {
  props: {
    // æ§åˆ¶ç¼–è¾‘çŠ¶æ€çš„æ˜¾ç¤º
    isEdit: {
      type: Boolean, 
      required: true
    }
  },
  model: {
    prop: 'isEdit', // v-modelæ¥æ”¶çš„å€¼ = props çš„ isEdit å±æ€§æ¥æ”¶çš„å€¼
    // è¿™ä¸ªäº‹ä»¶åå¯ä»¥éšæ„å†™ï¼Œå®ƒå®é™…ä¸Šæ˜¯è§„å®šäº†å­ç»„ä»¶è¦æ›´æ–°çˆ¶ç»„ä»¶å€¼éœ€è¦æ³¨å†Œçš„æ–¹æ³•
    event: 'changeEdit'
  },
}
```
```js
    /**
     * ç‚¹å‡»ç¼–è¾‘åˆ‡æ¢çŠ¶æ€
     */
    editCannel () {
      this.$emit('changeEdit', !this.isEdit)
    },
```
- çˆ¶ç»„ä»¶
```js
  data () {
    return {
      isEdit: false
    }
  }
```
```html
<channel-edit v-model="isEdit" :my-channels="channels" :active="active" @update-active="onUpdateActive"/>
```

### é¢‘é“æ•°æ®æŒä¹…åŒ–

ä¸šåŠ¡åˆ†æ

é¢‘é“ç¼–è¾‘è¿™ä¸ªåŠŸèƒ½ï¼Œæ— è®ºç”¨æˆ·æ˜¯å¦ç™»å½•ç”¨æˆ·éƒ½å¯ä»¥ä½¿ç”¨ã€‚

- ä¸ç™»å½•ä¹Ÿèƒ½ä½¿ç”¨
    - æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°
    - ä¸æ”¯æŒåŒæ­¥åŠŸèƒ½
- ç™»å½•ä¹Ÿèƒ½ä½¿ç”¨
    - æ•°æ®å­˜å‚¨åœ¨çº¿ä¸Šåå°æœåŠ¡å™¨
    - æ›´æ¢ä¸åŒçš„è®¾å¤‡å¯ä»¥åŒæ­¥æ•°æ®

å®ç°ï¼š

1. . `src\constants\index.js`
```js
/**
 * é¢‘é“åˆ—è¡¨
 */
export const channels = 'CHANNELS'

/**
 * æ¨èåˆ—è¡¨
 */
export const recommendChannels = 'RECOMMEND_CHANNELS'
```
2. `src\store\modules\home.store.js`
```js
    /**
     * æ·»åŠ é¢‘é“(æœ¬åœ°)
     * @param {*} state
     * @param {*} channel éœ€è¦æ·»åŠ çš„é¢‘é“
     */
    changeChannels (state, channel) {
      // æ›¿æ¢æ—§å¯¹è±¡çš„æ–¹å¼è§¦å‘ mutations
      state.channels.push(channel)
      state.recommendChannels = state.recommendChannels.filter(recommendChannel => recommendChannel.id !== channel.id)
      // æœ¬åœ°æŒä¹…åŒ–
      setItem(channels, state.channels)
      setItem(recommendChannels, state.recommendChannels)
    },
```
```js
    /**
     * åˆ é™¤é¢‘é“(æœ¬åœ°)
     * @param {*} state
     * @param {*} param1 éœ€è¦åˆ é™¤çš„é¢‘é“
     */
    deleteChannels (state, { channel, index }) {
      state.channels.splice(index, 1)
      console.log(11)
      state.recommendChannels.push(channel)
      // æœ¬åœ°æŒä¹…åŒ–
      setItem(channels, state.channels)
      setItem(recommendChannels, state.recommendChannels)
    },
```

### æ­£ç¡®çš„è·å–é¦–é¡µé¢‘é“åˆ—è¡¨æ•°æ®

> è·å–ç™»å½•ç”¨æˆ·çš„é¢‘é“åˆ—è¡¨å’Œè·å–é»˜è®¤æ¨èçš„é¢‘é“åˆ—è¡¨æ˜¯åŒä¸€ä¸ªæ•°æ®æ¥å£ã€‚åç«¯ä¼šæ ¹æ®æ¥å£ä¸­çš„ `token` æ¥åˆ¤å®šè¿”å›æ•°æ®ã€‚

```js
async loadChannels () {
  try {
    let channels = []
    if (this.user) {
      // å·²ç™»å½•ï¼Œè¯·æ±‚è·å–çº¿ä¸Šçš„é¢‘é“æ•°æ®
      const { data } = await getChannels()
      channels = data.data.channels
    } else {
      // æœªç™»å½•
      const localChannels = getItem('channels')
      if (localChannels) {
        // æœ‰æœ¬åœ°é¢‘é“æ•°æ®ï¼Œåˆ™ä½¿ç”¨
        channels = localChannels
      } else {
        // æ²¡æœ‰æœ¬åœ°é¢‘é“æ•°æ®ï¼Œåˆ™è¯·æ±‚è·å–é»˜è®¤æ¨èçš„é¢‘é“åˆ—è¡¨
        const { data } = await getChannels()
        channels = data.data.channels
      }
    }

    // å°†æ•°æ®æ›´æ–°åˆ°ç»„ä»¶ä¸­
    this.channels = channels
  } catch (err) {
    console.log(err)
    this.$toast('æ•°æ®è·å–å¤±è´¥')
  }
},
```